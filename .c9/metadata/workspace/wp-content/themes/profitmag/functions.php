{"changed":false,"filter":false,"title":"functions.php","tooltip":"/wp-content/themes/profitmag/functions.php","value":"<?php\n/**\n * ProfitMag functions and definitions\n *\n * @package ProfitMag\n */\n\n/**\n * Set the content width based on the theme's design and stylesheet.\n */\nif ( ! isset( $content_width ) ) {\n\t$content_width = 640; /* pixels */\n}\n\nif ( ! function_exists( 'profitmag_setup' ) ) :\n/**\n * Sets up theme defaults and registers support for various WordPress features.\n *\n * Note that this function is hooked into the after_setup_theme hook, which\n * runs before the init hook. The init hook is too late for some features, such\n * as indicating support for post thumbnails.\n */\nfunction profitmag_setup() {\n\n\t/*\n\t * Make theme available for translation.\n\t * Translations can be filed in the /languages/ directory.\n\t * If you're building a theme based on ProfitMag, use a find and replace\n\t * to change 'profitmag' to the name of your theme in all the template files\n\t */\n\tload_theme_textdomain( 'profitmag', get_template_directory() . '/languages' );\n\n\t// Add default posts and comments RSS feed links to head.\n\tadd_theme_support( 'automatic-feed-links' );\n    \n    \n    // Add Featured Image\n    add_theme_support( 'post-thumbnails' );\n\n\t/*\n\t * Enable support for Post Thumbnails on posts and pages.\n\t *\n\t * @link http://codex.wordpress.org/Function_Reference/add_theme_support#Post_Thumbnails\n\t */\n\t//add_theme_support( 'post-thumbnails' );\n\n\t// This theme uses wp_nav_menu() in one location.\n\tregister_nav_menus( array(\n\t\t'primary' => __( 'Primary Menu', 'profitmag' ),\n\t) );\n\n\t/*\n\t * Switch default core markup for search form, comment form, and comments\n\t * to output valid HTML5.\n\t */\n\tadd_theme_support( 'html5', array(\n\t\t'search-form', 'comment-form', 'comment-list', 'gallery', 'caption',\n\t) );\n\n\t/*\n\t * Enable support for Post Formats.\n\t * See http://codex.wordpress.org/Post_Formats\n\t */\n\tadd_theme_support( 'post-formats', array(\n\t\t'aside', 'image', 'video', 'quote', 'link',\n\t) );\n\n\t// Setup the WordPress core custom background feature.\n\tadd_theme_support( 'custom-background', apply_filters( 'profitmag_custom_background_args', array(\n\t\t'default-color' => 'ffffff',\n\t\t'default-image' => '',\n\t) ) );\n    \n}\nendif; // profitmag_setup\nadd_action( 'after_setup_theme', 'profitmag_setup' );\n\n\n/**\n *  Store post view counter \n */\nfunction profitmag_record_views($postID) {\n    $count_key = 'post_views_count';\n    $count = get_post_meta($postID, $count_key, true);    \n    if($count==''){\n        $count = 0;\n        delete_post_meta($postID, $count_key);\n        add_post_meta($postID, $count_key, '0');\n    }else{\n        $count++;\n        update_post_meta($postID, $count_key, $count);\n    }\n}\n\n\n// Resize images\nif ( function_exists( 'add_image_size' ) ) { \n\tadd_image_size( 'home-slider', 660, 365, true ); \n    add_image_size( 'slider-beside', 240, 172, true );\n    add_image_size( 'three-col-thumb', 265, 153, true );\n    add_image_size( 'five-col-thumb', 148, 85, true );\n    add_image_size( 'block4-main-thumb', 487, 304, true );\n    add_image_size( 'block4-post-thumb', 100, 85, true );\n    add_image_size( 'block-left-right', 174, 111, true );\n    add_image_size( 'popular-thumb', 193, 112, true );\n    add_image_size( 'gallery-full', 818, 537, true );\n    add_image_size( 'gallery-thumb', 71, 40, true );\n    add_image_size( 'recent-thumb', 95, 62, true );\n    add_image_size( 'sidebar-medium', 272, 137, true );\n    add_image_size( 'sidebar-gallery', 83, 83, true );\n    add_image_size( 'single-thumb', 563, 353, true );\n    add_image_size( 'comment-thumb', 117, 91, true );\n    add_image_size( 'archive-thumb', 200, 140, true );\n    \n}\n\n/**\n * Custom template tags for this theme.\n */\nrequire get_template_directory() . '/inc/template-tags.php';\n\n/**\n * Custom functions that act independently of the theme templates.\n */\nrequire get_template_directory() . '/inc/extras.php';\n\n/**\n * Customizer additions.\n */\nrequire get_template_directory() . '/inc/customizer.php';\n\n/**\n * Load Jetpack compatibility file.\n */\nrequire get_template_directory() . '/inc/jetpack.php';\n\n/**\n * Custom Header Logo\n */\nrequire get_template_directory() . '/inc/custom-header.php';\n\n/**\n * Implement the Theme Option feature\n */\nrequire get_template_directory().'/inc/admin-panel/theme-options.php';\n\n/**\n * Custom functions for theme\n */\nrequire get_template_directory().'/inc/profitmag-functions.php';\n\n/**\n * Implement Custom Widgets\n */\nrequire get_template_directory().'/inc/profitmag-widgets.php';","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":1800,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":74,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1424023454048}